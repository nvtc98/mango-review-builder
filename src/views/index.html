<!DOCTYPE html>
<html>

<style>
    .listItem {
        padding: 10px;
    }

    .listItem:hover {
        color: #FCBB02;
        cursor: pointer;
    }

    #anotherCSVBtn {
        cursor: pointer;
        color: blue;
    }
</style>

<body>
    <form action="/upload-csv" enctype="multipart/form-data" method="POST" id="uploadCSVForm">
        <input type="text" class="session" name="session" style="display: none;" />
        <label id="csvLabel" for="csvFile">Choose a CSV file</label><br>
        <input type="file" id="csvFile" name="csvFile" accept=".csv" required><br><br>
        <input type="submit">
    </form>

    <div id="anotherCSV" style="display:none">
        <div>CSV file uploaded.</div>
        <div id="anotherCSVBtn">Choose another CSV file</div>
    </div>

    <div id="select" style="display: none;">
        <br>
        <hr>
        <form action="/progress" enctype="multipart/form-data" method="POST" id="uploadVideoForm">
            <input type="text" class="session" name="session" style="display: none;" />
            <h4>Select video:</h4>
            <div id="list"></div>
            <h4>Choose a video file</h4>
            <input type="file" id="videoFile" name="videoFile" accept="video/*" required><br><br>
            <input type="submit">
        </form>
    </div>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript">
    const session = new URLSearchParams(window.location.search).get('session') || Math.random().toString(36).substring(7);
    let list = new URLSearchParams(window.location.search).get('list');
    $(".session").val(session);

    if (list) {
        $("#uploadCSVForm").hide();
        $("#anotherCSV").show();
        $("#anotherCSVBtn").click(() => {
            $("#uploadCSVForm").slideToggle('fast');
        });
        $("#select").show();
        list = list.split("--");
        let listContent = '';
        list.forEach(x => {
            listContent += `<input type="radio" id="${x}" name="videoSelect" value="${x}" required><label for="${x}">${x}</label><br>`
        })
        $("#list").html(listContent + '')
    }

</script>

</html>